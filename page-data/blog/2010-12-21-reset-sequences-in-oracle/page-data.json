{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2010-12-21-reset-sequences-in-oracle/","result":{"data":{"markdownRemark":{"html":"<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">CREATE OR REPLACE</span></p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">PROCEDURE </span>RESETSEQ</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">AS</span></p>\n<p style=\"padding-left:30px;text-align:justify;\">L_CURSEQVAL <span style=\"color:#0000ff;\">NUMBER </span>;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#008000;\">--- SELECT ALL THE SEQUENCES IN THE DB FOR WHICH THE SEQUENCES HAS TO BE RESET.</span><br/>\n<span style=\"color:#008000;\"> --- Ex: HERE THE PRODUCT 'XXX' HAS SEQUENCES STARTING WITH XXX_SEQ_T_***</span></p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">CURSOR </span>SEQNAMESCURSR<br/>\n<span style=\"color:#0000ff;\">IS</span><br/>\n<span style=\"color:#0000ff;\"> SELECT </span>US.SEQUENCE_NAME <span style=\"color:#0000ff;\">AS </span>V_SEQNAME<br/>\n<span style=\"color:#0000ff;\"> FROM </span>USER_SEQUENCES US<br/>\n<span style=\"color:#0000ff;\"> WHERE </span>( SEQUENCE_NAME LIKE '%XXX_SEQ_T%' ) ;<br/>\nCURROW \tSEQNAMESCURSR%<span style=\"color:#0000ff;\">ROWTYPE </span>;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">BEGIN</span><br/>\n<span style=\"color:#0000ff;\">OPEN </span>SEQNAMESCURSR<br/>\n<span style=\"color:#0000ff;\">LOOP</span><br/>\n<span style=\"color:#0000ff;\"> FETCH </span>SEQNAMESCURSR <span style=\"color:#0000ff;\">INTO</span> CURROW ;<br/>\n<span style=\"color:#0000ff;\"> EXIT WHEN </span>SEQNAMESCURSR<span style=\"color:#0000ff;\">%</span>NOTFOUND ;</p>\n<p style=\"padding-left:30px;text-align:justify;\"><span style=\"color:#008000;\">--- GET THE NEXT VALUE OF THE SEQUENCE</span><br/>\n<span style=\"color:#0000ff;\">EXECUTE IMMEDIATE</span><br/>\n'SELECT' || CURROW.V_SEQNAME || '.NEXTVAL FROM DUAL' <span style=\"color:#0000ff;\">INTO </span>L_CURSEQVAL ;</p>\n<p style=\"padding-left:30px;text-align:justify;\"><span style=\"color:#008000;\">--- ALTER THE SEQUENCE TO RESET THE SEQUENCE TO ZERO BY INCREMENTING WITH THE </span><span style=\"color:#008000;\">NEGATIVE VALUE OF L_CURSEQVAL (QUERIED ABOVE)</span><br/>\n<span style=\"color:#0000ff;\">EXECUTE IMMEDIATE</span><br/>\n'SELECT' || CURROW.V_SEQNAME || 'INCREMENT BY -' || L_CURSEQVAL || 'MINVALUE 0' ;</p>\n<p style=\"text-align:justify;padding-left:30px;\"><span style=\"color:#008000;\">--- GET THE NEXT VALUE FROM THE SEQUENCE. THIS WILL SET THE SEQUENCE TO ZERO</span></p>\n<p style=\"text-align:justify;padding-left:30px;\"><span style=\"color:#0000ff;\">EXECUTE IMMEDIATE</span><br/>\n'SELECT' || CURROW.V_SEQNAME || '.NEXTVAL FROM DUAL' <span style=\"color:#0000ff;\">INTO </span>L_CURSEQVAL ;</p>\n<p style=\"text-align:justify;padding-left:30px;\"><span style=\"color:#008000;\">--- RESET THE INCREMENT VALUE TO 1 BY ALTERING THE SEQUNCE</span><br/>\n<span style=\"color:#0000ff;\">EXECUTE IMMEDIATE</span><br/>\n'SELECT' || CURROW.V_SEQNAME || 'INCREMENT BY 1 MINVALUE 0' ;<br/>\n<span style=\"color:#0000ff;\">COMMIT </span>;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">END LOOP </span>;<br/>\n<span style=\"color:#0000ff;\">CLOSE </span>SEQNAMESCURSR ;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">COMMIT </span>;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">EXCEPTION</span></p>\n<p style=\"text-align:justify;padding-left:30px;\"><span style=\"color:#0000ff;\">WHEN </span>OTHERS <span style=\"color:#0000ff;\">THEN</span><br/>\n<span style=\"color:#0000ff;\">IF </span>SEQNAMESCURSR<span style=\"color:#0000ff;\">%</span>ISOPEN <span style=\"color:#0000ff;\">THEN</span><br/>\n<span style=\"color:#0000ff;\">CLOSE </span>SEQNAMESCURSR ;<br/>\n<span style=\"color:#0000ff;\">END IF</span> ;<br/>\n<span style=\"color:#0000ff;\">RAISE </span>;<br/>\n<span style=\"color:#0000ff;\">ROLLBACK </span>;</p>\n<p style=\"text-align:justify;\"><span style=\"color:#0000ff;\">END </span>RESETSEQ ;</p>","excerpt":"","frontmatter":{"date":"21 December, 2010","path":"/blog/2010-12-21-reset-sequences-in-oracle/","title":"Reset Sequences in Oracle"},"fields":{"readingTime":{"text":"2 min read"}}}},"pageContext":{}},"staticQueryHashes":["3649515864","63159454"]}